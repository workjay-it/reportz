<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Research Reports â€” Professional Intelligence Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Merriweather:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        /* Existing Styles from your reports.html */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Inter', sans-serif; background: #f8fafc; color: #1e293b; line-height: 1.6; }
        .serif { font-family: 'Merriweather', serif; }
        .header { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: white; border-bottom: 3px solid #3b82f6; }
        .header-inner { max-width: 1400px; margin: 0 auto; padding: 24px 32px; }
        .logo { font-size: 1.5rem; font-weight: 900; letter-spacing: -0.03em; }
        .logo span { color: #3b82f6; }
        .nav-tabs { background: white; border-bottom: 2px solid #e2e8f0; position: sticky; top: 0; z-index: 100; }
        .nav-tabs-inner { max-width: 1400px; margin: 0 auto; padding: 0 32px; display: flex; gap: 4px; }
        .nav-tab { padding: 14px 24px; font-size: 0.875rem; font-weight: 600; color: #64748b; background: transparent; border: none; border-bottom: 3px solid transparent; cursor: pointer; }
        .nav-tab.active { color: #1e293b; border-bottom-color: #3b82f6; }
        .container { max-width: 1400px; margin: 0 auto; padding: 32px; }
        .config-panel { background: white; border-radius: 12px; padding: 28px; margin-bottom: 24px; border: 1px solid #e2e8f0; }
        .btn-generate { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; padding: 14px 32px; border-radius: 8px; font-weight: 700; cursor: pointer; width: 100%; }
        .report-container { background: white; border-radius: 12px; border: 1px solid #e2e8f0; overflow: hidden; box-shadow: 0 4px 16px rgba(0,0,0,0.08); }
        .report-header { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); color: white; padding: 32px 40px; border-bottom: 4px solid #3b82f6; }
        .report-body { padding: 40px; }
        .loading { text-align: center; padding: 60px 20px; }
        .spinner { width: 48px; height: 48px; border: 4px solid #e2e8f0; border-top-color: #3b82f6; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

<header class="header">
    <div class="header-inner">
        <div class="logo">Market<span>Intelligence</span> Reports</div>
        <div class="tagline">Professional-grade market research for startups, businesses, and investors</div>
    </div>
</header>

<nav class="nav-tabs">
    <div class="nav-tabs-inner">
        <button class="nav-tab active">Monthly Deep Dive</button>
    </div>
</nav>

<div class="container">
    <div class="config-panel">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div>
                <label class="block text-xs font-bold uppercase text-slate-500 mb-2">Sector</label>
                <select id="sector" class="w-full p-3 bg-slate-50 border rounded-lg font-semibold">
                    <option value="Renewable Energy">Renewable Energy</option>
                    <option value="Artificial Intelligence">AI / Tech</option>
                    <option value="Healthcare">Healthcare</option>
                </select>
            </div>
            <div>
                <label class="block text-xs font-bold uppercase text-slate-500 mb-2">Region</label>
                <select id="country" class="w-full p-3 bg-slate-50 border rounded-lg font-semibold">
                    <option value="Global">Global</option>
                    <option value="India">India</option>
                    <option value="United States">United States</option>
                </select>
            </div>
        </div>
        <button class="btn-generate" onclick="generateReport()" id="generateBtn">Generate Professional Report</button>
    </div>

    <div id="loadingState" class="loading hidden">
        <div class="spinner"></div>
        <div class="text-lg font-bold">Consulting Intelligence Engine...</div>
        <p class="text-slate-500 italic">Formatting high-density strategic insights</p>
    </div>

    <div id="reportOutput" class="hidden"></div>
</div>

<script>
async function generateReport() {
    const sector = document.getElementById('sector').value;
    const country = document.getElementById('country').value;
    const btn = document.getElementById('generateBtn');
    const loading = document.getElementById('loadingState');
    const output = document.getElementById('reportOutput');

    loading.classList.remove('hidden');
    output.classList.add('hidden');
    btn.disabled = true;

    // YOUR API KEY
    const API_KEY = "AIzaSyDWTty5BuvJhZa7bsZszThAFKpDbTjsQDg";
    const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`;

    const promptText = `Act as a Senior Partner at McKinsey. Generate a high-density 4000-word market intelligence deep-dive for the ${sector} industry in ${country}. 
    Use the Pyramid Principle: Conclusions first. 
    Include: 
    1. Executive Summary with Action Titles.
    2. Market Sizing (TAM/SAM/SOM).
    3. Competitive Landscape with top 5 players.
    4. 3-Year Strategic Roadmap.
    Format with Markdown headers (##).`;

    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                contents: [{ parts: [{ text: promptText }] }]
            })
        });

        const data = await response.json();
        if (data.error) throw new Error(data.error.message);

        const reportContent = data.candidates[0].content.parts[0].text;
        displayReport(reportContent, sector, country);

    } catch (err) {
        alert("System Error: " + err.message);
    } finally {
        loading.classList.add('hidden');
        btn.disabled = false;
    }
}

function displayReport(markdown, sector, country) {
    const output = document.getElementById('reportOutput');
    output.classList.remove('hidden');

    let html = markdown
        .replace(/^## (.*$)/gim, '<h3 class="text-2xl font-black serif text-slate-800 mt-10 mb-4 border-b-2 pb-2">$1</h3>')
        .replace(/\*\*(.*?)\*\*/g, '<strong class="text-blue-700">$1</strong>')
        .replace(/^\- (.*$)/gim, '<li class="ml-6 mb-2 list-disc">$1</li>');

    output.innerHTML = `
        <div class="report-container">
            <div class="report-header">
                <div class="text-3xl font-black serif">${sector} Intelligence Report</div>
                <div class="mt-2 text-slate-400 font-bold uppercase tracking-widest text-xs">Region: ${country} // 2026 Strategic Forecast</div>
            </div>
            <div class="report-body prose max-w-none text-slate-700 leading-relaxed">
                ${html}
                <div class="mt-12 pt-10 border-t">
                     <canvas id="marketChart" height="100"></canvas>
                </div>
                <button class="mt-10 bg-slate-800 text-white px-6 py-2 rounded font-bold" onclick="window.print()">Download PDF</button>
            </div>
        </div>
    `;

    const ctx = document.getElementById('marketChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['2024', '2025', '2026', '2027', '2028'],
            datasets: [{
                label: 'Market Growth Projection',
                data: [12, 19, 35, 50, 72],
                borderColor: '#3b82f6',
                borderWidth: 4,
                tension: 0.4
            }]
        }
    });
}
</script>
</body>
</html>
