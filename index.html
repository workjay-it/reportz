<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Market Intelligence Platform â€” Professional Reports</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Merriweather:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background: #f8fafc; color: #0f172a; }
        .serif { font-family: 'Merriweather', serif; }
        .consultancy-header { border-top: 8px solid #003087; }
        .report-box { background: white; box-shadow: 0 4px 20px rgba(0,0,0,0.08); border-radius: 4px; border: 1px solid #e2e8f0; }
        .spinner { width: 48px; height: 48px; border: 4px solid #e2e8f0; border-top-color: #003087; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 0 auto; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body class="p-4 md:p-12">

<div class="max-w-6xl mx-auto">
    <div class="mb-10 flex justify-between items-end border-b-2 border-slate-200 pb-6">
        <div>
            <h1 class="text-3xl font-black text-slate-900 serif tracking-tight uppercase">Strategic Analyzer <span class="text-blue-700">2026</span></h1>
            <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-slate-500 mt-2">Node: Gemini-2.0-Flash-Inference // Secure Tier</p>
        </div>
    </div>

    <div class="bg-white p-8 border border-slate-200 shadow-sm mb-12 grid grid-cols-1 md:grid-cols-3 gap-8 rounded-lg">
        <div>
            <label class="block text-[10px] font-black uppercase text-slate-400 mb-2">Market Sector</label>
            <select id="sector" class="w-full p-3 bg-slate-50 border border-slate-300 rounded font-bold text-slate-700">
                <option value="Generative AI & LLM Systems">Generative AI</option>
                <option value="Renewable Energy Infrastructure">Renewable Energy</option>
                <option value="Cybersecurity & Defense Tech">Cybersecurity</option>
                <option value="Fintech & Digital Payments">Fintech</option>
            </select>
        </div>
        <div>
            <label class="block text-[10px] font-black uppercase text-slate-400 mb-2">Region</label>
            <select id="country" class="w-full p-3 bg-slate-50 border border-slate-300 rounded font-bold text-slate-700">
                <option value="United States">United States</option>
                <option value="India">India</option>
                <option value="China">China</option>
                <option value="European Union">European Union</option>
            </select>
        </div>
        <div class="flex items-end">
            <button onclick="generateReport()" id="genBtn" class="w-full bg-[#003087] text-white font-black py-3 rounded hover:bg-blue-900 transition tracking-widest text-sm">
                RUN STRATEGIC ANALYSIS
            </button>
        </div>
    </div>

    <div id="loading" class="hidden text-center py-20">
        <div class="spinner mb-6"></div>
        <p class="serif italic text-slate-600">Consulting real-time intelligence nodes for 2026 forecasts...</p>
    </div>

    <div id="reportOutput" class="hidden report-box consultancy-header p-8 md:p-16">
        </div>
</div>

<script>
async function generateReport() {
    const sector = document.getElementById('sector').value;
    const country = document.getElementById('country').value;
    const btn = document.getElementById('genBtn');
    const loading = document.getElementById('loading');
    const output = document.getElementById('reportOutput');

    loading.classList.remove('hidden');
    output.classList.add('hidden');
    btn.disabled = true;

    // Corrected Gemini API Configuration
    const API_KEY = "AIzaSyDWTty5BuvJhZa7bsZszThAFKpDbTjsQDg";
    const model = "gemini-2.0-flash";
    const url = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${API_KEY}`;

    const promptText = `Act as a Senior Partner at a leading strategy consultancy. 
    Generate a high-density market intelligence report for ${sector} in ${country}. 
    Use the Pyramid Principle: Conclusions first. 
    Include Action Titles for headings and a detailed 3-year strategic roadmap for 2026-2029. 
    Format with Markdown headers (##).`;

    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                contents: [{ parts: [{ text: promptText }] }]
            })
        });

        const data = await response.json();
        
        if (data.error) throw new Error(data.error.message);

        const rawContent = data.candidates[0].content.parts[0].text;
        renderProfessionalReport(rawContent, sector, country);

    } catch (error) {
        alert("Inference Error: " + error.message);
    } finally {
        loading.classList.add('hidden');
        btn.disabled = false;
    }
}

function renderProfessionalReport(text, sector, country) {
    const output = document.getElementById('reportOutput');
    output.classList.remove('hidden');

    // Convert Markdown to High-End Professional HTML
    let formatted = text
        .replace(/^## (.*)/gm, '<h3 class="text-2xl font-black serif text-slate-800 mt-12 mb-4 border-b pb-2">$1</h3>')
        .replace(/^\- (.*)/gm, '<li class="ml-6 mb-2 list-disc text-slate-700">$1</li>')
        .replace(/\*\*(.*?)\*\*/g, '<strong class="text-blue-900">$1</strong>');

    output.innerHTML = `
        <div class="mb-12 flex justify-between items-start">
            <div class="text-[10px] font-black tracking-widest text-slate-400 uppercase">Diagnostic // ${sector} // ${country}</div>
            <button onclick="window.print()" class="text-[10px] font-bold border border-slate-300 px-4 py-1 hover:bg-slate-50">EXPORT PDF</button>
        </div>
        
        <div class="prose max-w-none leading-relaxed text-lg">
            ${formatted}
        </div>

        <div class="mt-20 pt-10 border-t border-slate-100">
            <p class="text-[10px] font-black text-center text-slate-400 uppercase tracking-widest mb-8">Growth Velocity Forecast (2024 - 2028)</p>
            <canvas id="growthChart" height="100"></canvas>
        </div>
    `;

    // Initialize the McKinsey Growth Chart
    const ctx = document.getElementById('growthChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['2024', '2025', '2026', '2027', '2028'],
            datasets: [{
                label: 'Projected CAGR Index',
                data: [12, 21, 38, 55, 74],
                borderColor: '#003087',
                borderWidth: 4,
                tension: 0.4,
                backgroundColor: 'rgba(0, 48, 135, 0.05)',
                fill: true
            }]
        },
        options: {
            plugins: { legend: { display: false } },
            scales: { y: { display: false }, x: { grid: { display: false } } }
        }
    });
}
</script>
</body>
</html>
